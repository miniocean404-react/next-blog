model User {
  id            BigInt    @id @default(autoincrement())
  cuid          String    @unique @default(cuid())
  account       String?   @db.VarChar(32)
  nickname      String?   @db.VarChar(32)
  email         String?   @unique @db.VarChar(64)
  // 邮箱确认时间
  emailVerified DateTime? @db.DateTime(0)
  password      String?   @db.VarChar(255)
  real_assword  String?   @db.VarChar(32)

  mobile    String? @db.VarChar(32)
  real_name String? @db.VarChar(32)
  gender    String? @default("2") @db.Char(1)

  // '0'禁用，'1' 启用, '2' 密码过期或初次未修改
  status Int?    @default(1) @db.TinyInt
  // 头像
  avatar String? @db.VarChar(255)

  country  String? @db.VarChar(32)
  province String? @db.VarChar(32)
  city     String? @db.VarChar(32)
  area     String? @db.VarChar(32)
  street   String? @db.VarChar(255)

  // 备注
  comments String? @db.VarChar(255)

  creator  BigInt?
  operator BigInt?
  // 1:删除 0:不删除
  del_flag Int?    @default(0) @db.TinyInt

  createdAt DateTime @default(dbgenerated("NOW()")) @db.DateTime
  updatedAt DateTime @default(dbgenerated("NOW() ON UPDATE NOW()")) @db.Timestamp(0)

  @@index([email])
  @@index([real_name])
  @@index([mobile], map: "mobile")
  @@map("user")
}

model Role {
  id          BigInt  @id @default(autoincrement())
  // 父id
  parent_id   BigInt? @default(0)
  // 角色名称
  role_name   String? @db.VarChar(40)
  // 角色标识
  role_key    String? @db.VarChar(32)
  role_level  Int?
  // 1有效，0禁用
  role_status Int?    @default(1) @db.TinyInt
  // 描述
  comments    String? @db.VarChar(255)
  // 创建者
  creator     BigInt?
  // 更新人
  operator    BigInt?
  del_flag    Int?    @default(0) @db.TinyInt

  createdAt DateTime @default(dbgenerated("NOW()")) @db.DateTime
  updatedAt DateTime @default(dbgenerated("NOW() ON UPDATE NOW()")) @db.Timestamp(0)

  @@unique([role_key])
  @@index([role_name])
  @@map("role")
}

model UserRole {
  id       BigInt  @id @default(autoincrement())
  user_id  BigInt
  role_id  BigInt
  // 创建者
  creator  BigInt?
  // 更新人
  operator BigInt?
  del_flag Int?    @default(0) @db.TinyInt

  createdAt DateTime @default(dbgenerated("NOW()")) @db.DateTime
  updatedAt DateTime @default(dbgenerated("NOW() ON UPDATE NOW()")) @db.Timestamp(0)

  @@index([role_id])
  @@index([user_id])
  @@map("user_role")
}
