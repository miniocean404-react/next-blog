model User {
  id            String    @id @default(cuid())
  name          String?   @db.VarChar(100)
  username      String?   @unique
  email         String?   @unique
  image         String?
  // 邮箱确认时间
  emailVerified DateTime?
  password      String?
  realPassword  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // isMachine        Boolean @default(false)
  accounts Account[]
  sessions Session[]
  tokens   Token[]
  roles    UserRole[]

  @@index(email)
}

model Role {
  id          String           @id @default(cuid())
  name        String           @unique
  description String?
  users       UserRole[]
  permissions RolePermission[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UserRole {
  id     String @id @default(cuid())
  userId String
  roleId String

  user User @relation(fields: [userId], references: [id])
  role Role @relation(fields: [roleId], references: [id])

  @@unique([userId, roleId])
}
