model User {
  id            BigInt    @id @default(autoincrement())
  cuid          String    @default(cuid())
  name          String?   @db.VarChar(32)
  username      String?   @unique
  email         String?
  image         String?
  // 邮箱确认时间
  emailVerified DateTime?
  password      String?
  realPassword  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // isMachine        Boolean @default(false)
  del_flag Int? @default(0) @db.TinyInt

  Account Account[]
  Token   Token[]
  Session Session[]

  @@index([email])
}

model Role {
  id          BigInt           @id @default(autoincrement())
  name        RoleType         @default(USER)
  description String?
  users       UserRole[]
  permissions RolePermission[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum RoleType {
  USER
  ADMIN
}

model UserRole {
  id     String @id @default(cuid())
  userId String
  roleId String

  // role Role @relation(fields: [roleId], references: [id], onDelete: Cascade)
  // User User @relation(fields: [userId], references: [id])
  Role Role @relation(fields: [roleId], references: [id])

  @@unique([userId, roleId])
}
